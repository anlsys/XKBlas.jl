Useful links
- https://github.com/JuliaSmoothOptimizers/Krylov.jl/blob/main/src/krylov_utils.jl#L309
- https://gitlab.inria.fr/xkaapi/dev-v2

##########################################
############# October ##################
##########################################

### 09/10/2025 ###
- What's been done in the past 2 weeks
    - XKBlas.jl julia package
        https://github.com/anlsys/XKBlas.jl
    - drop-in shared library, implementing OpenBLAS symbols (libxkblas_cblas.so)
        https://gitlab.inria.fr/xkblas/dev/-/blob/v2.0/api/cblas/wrappers.cc

- JuliaCon paper (relatively short, 6 pages)
    - introduction
    - background
        - on multi-GPU BLAS and XKBlas
        - on solvers and Krylov.jl
    - contribution
        - XKBlas.jl - XKBLAS bindings
        - extensions to Krylov.jl to support asynchronous kernels invocations
    - evaluations
        - on kernels
            - single kernel
            - composing (MUMPS sequence)
        - on Krylov.jl
            - as a drop-in replacement on a few solvers
            - reimplementing CG with 'async' semantic
    - conclusion
    
##########################################
############# SEPTEMBER ##################
##########################################

### 25/09/2025 ###

Objectives for the next 3 weeks:
    - finish glue between XKBlas.jl and libxkblas (c)
    - start implementing Krylov.jl interfaces
        1) XKVector/XKMatrix/XKCSRMatrix
            - synchronously : gemm = xkblas_gemm_async() + xkblas_sync()
        2) then extending Krylov.jl interfaces with
            - an optional 'async()' argument
            - a 'ksync()' that is a no-op by default, and an `xkblas_sync()` on XKVectors/XKMatrix
            - a macro on host-code that runs it by default, or transform it a host-task on XKVector/XKMatrix

See 19/09/2025
Issue: https://github.com/JuliaLang/julia/issues/59640
    - Calling pthreads from Julia thread is undefined behavior
    - In practice call-sequence like this leads to deadlock: Julia program > custom C library > Julia program > Julia runtime (deadlock here) > should return ...
    - This seems to work: Julia program > custom C library > Julia program > returns to custom C library > returns to Julia
Examples: https://gitlab.inria.fr/xkblas/dev/-/tree/v2.0-julia/api/julia/examples

### 19/09/2025 ### (SKIPPED, DELAYED TO 25/09/2025)
- Alexis will be missing
- Objective: discuss interfaces for XKRT / XKBlas in Julia
- got a SPMV running, could use Alexis code

Hi Michel, even though Alexis is absent next week, that'd be cool if we could maintain the meeting to discuss Julia interfaces
That includes 2 things:
(1) an overlay on top of XKBlas generated bindings, for cleaner interfaces (Alexis mentioned adding an XKVector, could be this ro anything else)
(2) as we briefly mentioned, whether we enforce programmers to use kernel on 1-element vectors, or provide a more generic lambda-alike interface similar to OpenMP tasks
On (2), i am thinking for instance on stuff like:
xkblas.host_async(                  # spawn a lambda-task that run on the host
    function (x, y)                 # this would typically be what's done synchronously in Alexis' code, with the small computation on the host
        z = x * y
    end,
    read(x),                        # x, y must be coherent on the host
    read(y),
    write(z)                        # write 'z' so future task reading it depends on that task
)

xkblas.gemm_async(..., beta=z, ...) # depends on the lambda func
so its inserted in XKBlas' task dependency graph, and synchronized coherently with other kernels (moving memory from/to GPUs/host implicitly, always)


### 04/09/2025 ###
- For next time
    - Think about what Julia interfaces we want for XKBlas
        - XKVector @Alexis
        - task-spawning routine using Julia functions/lambdas

- What to talk about
    - David's work - https://anonymous.4open.science/r/TBD-GPU/README.md
    - Alexis' work - https://github.com/JuliaSmoothOptimizers/Krylov.jl/tree/main
    - Maybe QR MUMPS aussi - https://qr_mumps.gitlab.io/
    - XKBlas Julia bindings: what do we want ? https://github.com/anlsys/xkblas

######################################
############# AUGUST #################
######################################

### 21/08/2025 ###
- Alexis suggested that the 'mult' may benefits from multi-GPU, in the case of spmv
- Krylov.jl implementations are agnostic of data placement

Questions for next time
    - how does that code executes ? (when the memory is moved H2D and D2H)
    - some relworks on Julia and parallel programming